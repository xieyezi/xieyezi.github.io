import{_ as e,c as o,o as t,a as c}from"./app.c6951d47.js";const E='{"title":"Dockerfile\u6587\u4EF6\u7684\u7F16\u5199","description":"","frontmatter":{"title":"Dockerfile\u6587\u4EF6\u7684\u7F16\u5199","tags":["docker"]},"headers":[{"level":3,"title":"Dockerfile \u6587\u4EF6\u7684\u7F16\u5199","slug":"dockerfile-\u6587\u4EF6\u7684\u7F16\u5199-1"}],"relativePath":"article/Dockerfile-Note.md"}',l={},d=c(`<h1 id="dockerfile-\u6587\u4EF6\u7684\u7F16\u5199" tabindex="-1">Dockerfile \u6587\u4EF6\u7684\u7F16\u5199 <a class="header-anchor" href="#dockerfile-\u6587\u4EF6\u7684\u7F16\u5199" aria-hidden="true">#</a></h1><h3 id="dockerfile-\u6587\u4EF6\u7684\u7F16\u5199-1" tabindex="-1">Dockerfile \u6587\u4EF6\u7684\u7F16\u5199 <a class="header-anchor" href="#dockerfile-\u6587\u4EF6\u7684\u7F16\u5199-1" aria-hidden="true">#</a></h3><p><code>FROM</code> : \u6307\u5B9A\u57FA\u7840\u955C\u50CF (\u53EF\u4EE5\u5230<a href="https://hub.docker.com/" target="_blank" rel="noopener noreferrer">Docker Hub</a>\u4E0A\u9762\u53BB\u5BFB\u627E\u60F3\u8981\u7684\u955C\u50CF) <code>RUN</code> : \u6267\u884C\u547D\u4EE4\uFF0C\u6709\u4E24\u79CD\u6A21\u5F0F:</p><ol><li>shell \u683C\u5F0F\uFF1A<code>RUN &lt;\u547D\u4EE4&gt;</code>\uFF0C\u5C31\u50CF\u76F4\u63A5\u5728\u547D\u4EE4\u884C\u4E2D\u8F93\u5165\u7684\u547D\u4EE4\u4E00\u6837;\u4F8B\u5982 <code>rm -rf xxx</code>,<code>npm install</code>\u7B49\u7B49;</li><li>exec \u683C\u5F0F\uFF1A<code>RUN [&quot;\u53EF\u6267\u884C\u6587\u4EF6&quot;, &quot;\u53C2\u65701&quot;, &quot;\u53C2\u65702&quot;]</code>\uFF0C\u8FD9\u66F4\u50CF\u662F\u51FD\u6570\u8C03\u7528\u4E2D\u7684\u683C\u5F0F\u3002 <blockquote><p>\u4E3A\u4E86\u4FDD\u6301 Dockerfile \u6587\u4EF6\u7684\u53EF\u8BFB\u6027\uFF0C\u53EF\u7406\u89E3\u6027\uFF0C\u4EE5\u53CA\u53EF\u7EF4\u62A4\u6027\uFF0C\u5EFA\u8BAE\u5C06\u957F\u7684\u6216\u590D\u6742\u7684 RUN \u6307\u4EE4\u7528\u53CD\u659C\u6760 \\ \u5206\u5272\u6210\u591A\u884C,\u4F8B\u5982:</p></blockquote></li></ol><div class="language-"><pre><code>RUN rm -f package-lock.json \\
  ; rm -rf .idea \\
  ; rm -rf node_modules \\
  ; npm config set registry &quot;https://registry.npm.taobao.org/&quot; \\
  &amp;&amp; npm install
</code></pre></div><p><code>COPY</code> : COPY \u6307\u4EE4\u5C06\u4ECE\u6784\u5EFA\u4E0A\u4E0B\u6587\u76EE\u5F55\u4E2D &lt;\u6E90\u8DEF\u5F84&gt; \u7684\u6587\u4EF6/\u76EE\u5F55\u590D\u5236\u5230\u65B0\u7684\u4E00\u5C42\u7684\u955C\u50CF\u5185\u7684 &lt;\u76EE\u6807\u8DEF\u5F84&gt; \u4F4D\u7F6E.</p><ol><li><code>COPY [--chown=&lt;user&gt;:&lt;group&gt;] &lt;\u6E90\u8DEF\u5F84&gt;... &lt;\u76EE\u6807\u8DEF\u5F84&gt;</code></li><li><code>COPY [--chown=&lt;user&gt;:&lt;group&gt;] [&quot;&lt;\u6E90\u8DEF\u5F841&gt;&quot;,... &quot;&lt;\u76EE\u6807\u8DEF\u5F84&gt;&quot;]</code></li></ol><p>\u4F8B\u5982:</p><div class="language-"><pre><code>COPY package.json /usr/src/app/
</code></pre></div><p>\u5C06 package.json \u6587\u4EF6\u590D\u5236\u5230\u955C\u50CF\u5185\u7684<code>/usr/src/app</code>\u4E0B\u9762</p><p><code>LABEL</code> : \u53EF\u4EE5\u7ED9\u955C\u50CF\u6DFB\u52A0\u6807\u7B7E\u6765\u5E2E\u52A9\u7EC4\u7EC7\u955C\u50CF\u3001\u8BB0\u5F55\u8BB8\u53EF\u4FE1\u606F\u3001\u8F85\u52A9\u81EA\u52A8\u5316\u6784\u5EFA\u7B49\u3002</p><div class="language-"><pre><code>  # \u8BBE\u7F6E\u4E00\u4E2A\u6216\u591A\u4E2ALABEL
  LABEL com.example.version=&quot;0.0.1-beta&quot;

  LABEL vendor=&quot;ACME Incorporated&quot;

  LABEL com.example.release-date=&quot;2015-02-12&quot;

  LABEL com.example.version.is-production=&quot;&quot;
</code></pre></div><p>\u4E00\u4E2A\u955C\u50CF\u53EF\u4EE5\u5305\u542B\u591A\u4E2A\u6807\u7B7E\uFF0C\u4F46\u5EFA\u8BAE\u5C06\u591A\u4E2A\u6807\u7B7E\u653E\u5165\u5230\u4E00\u4E2A LABEL \u6307\u4EE4\u4E2D:</p><div class="language-"><pre><code># Set multiple labels at once, using line-continuation characters to break long lines
LABEL vendor=ACME\\ Incorporated \\
    com.example.is-beta= \\
    com.example.is-production=&quot;&quot; \\
    com.example.version=&quot;0.0.1-beta&quot; \\
    com.example.release-date=&quot;2015-02-12&quot;
</code></pre></div><p><code>CMD</code> : \u7528\u4E8E\u6267\u884C\u76EE\u6807\u955C\u50CF\u4E2D\u5305\u542B\u7684\u8F6F\u4EF6\uFF0C\u53EF\u4EE5\u5305\u542B\u53C2\u6570</p><ol><li>shell \u683C\u5F0F\uFF1ACMD &lt;\u547D\u4EE4&gt;</li><li>exec \u683C\u5F0F\uFF1ACMD [&quot;\u53EF\u6267\u884C\u6587\u4EF6&quot;, &quot;\u53C2\u6570 1&quot;, &quot;\u53C2\u6570 2&quot;...]</li><li>\u53C2\u6570\u5217\u8868\u683C\u5F0F\uFF1ACMD [&quot;\u53C2\u6570 1&quot;, &quot;\u53C2\u6570 2&quot;...]\u3002\u5728\u6307\u5B9A\u4E86 ENTRYPOINT \u6307\u4EE4\u540E\uFF0C\u7528 CMD \u6307\u5B9A\u5177\u4F53\u7684\u53C2\u6570\u3002 <blockquote><p>CMD \u5927\u591A\u6570\u60C5\u51B5\u4E0B\u90FD\u5E94\u8BE5\u4EE5 CMD [&quot;executable&quot;, &quot;param1&quot;, &quot;param2&quot;...] \u7684\u5F62\u5F0F\u4F7F\u7528</p></blockquote></li></ol><p><code>ENV</code> : \u8BBE\u7F6E\u73AF\u5883\u53D8\u91CF</p><ol><li><code>ENV &lt;key&gt; &lt;value&gt;</code></li><li><code>ENV &lt;key1&gt;=&lt;value1&gt; &lt;key2&gt;=&lt;value2&gt;...</code></li></ol><p><code>VOLUME</code> : \u7528\u4E8E\u66B4\u9732\u4EFB\u4F55\u6570\u636E\u5E93\u5B58\u50A8\u6587\u4EF6\uFF0C\u914D\u7F6E\u6587\u4EF6\uFF0C\u6216\u5BB9\u5668\u521B\u5EFA\u7684\u6587\u4EF6\u548C\u76EE\u5F55.</p><ol><li><code>VOLUME [&quot;&lt;\u8DEF\u5F841&gt;&quot;, &quot;&lt;\u8DEF\u5F842&gt;&quot;...]</code></li><li><code>VOLUME &lt;\u8DEF\u5F84&gt;</code><blockquote><p>\u5F3A\u70C8\u5EFA\u8BAE\u4F7F\u7528 VOLUME \u6765\u7BA1\u7406\u955C\u50CF\u4E2D\u7684\u53EF\u53D8\u90E8\u5206\u548C\u7528\u6237\u53EF\u4EE5\u6539\u53D8\u7684\u90E8\u5206\u3002</p></blockquote></li></ol><p><code>EXPOSE</code> : \u58F0\u660E\u8FD0\u884C\u65F6\u5BB9\u5668\u63D0\u4F9B\u670D\u52A1\u7AEF\u53E3</p><div class="language-"><pre><code>EXPOSE &lt;\u7AEF\u53E31&gt; [&lt;\u7AEF\u53E32&gt;...]
</code></pre></div><blockquote><p>\u8981\u5C06 EXPOSE \u548C\u5728\u8FD0\u884C\u65F6\u4F7F\u7528 -p &lt;\u5BBF\u4E3B\u7AEF\u53E3&gt;:&lt;\u5BB9\u5668\u7AEF\u53E3&gt; \u533A\u5206\u5F00\u6765\u3002-p\uFF0C\u662F\u6620\u5C04\u5BBF\u4E3B\u7AEF\u53E3\u548C\u5BB9\u5668\u7AEF\u53E3\uFF0C\u6362\u53E5\u8BDD\u8BF4\uFF0C\u5C31\u662F\u5C06\u5BB9\u5668\u7684\u5BF9\u5E94\u7AEF\u53E3\u670D\u52A1\u516C\u5F00\u7ED9\u5916\u754C\u8BBF\u95EE\uFF0C\u800C EXPOSE \u4EC5\u4EC5\u662F\u58F0\u660E\u5BB9\u5668\u6253\u7B97\u4F7F\u7528\u4EC0\u4E48\u7AEF\u53E3\u800C\u5DF2\uFF0C\u5E76\u4E0D\u4F1A\u81EA\u52A8\u5728\u5BBF\u4E3B\u8FDB\u884C\u7AEF\u53E3\u6620\u5C04\u3002</p></blockquote><p><code>WORKDIR</code> : \u6307\u5B9A\u5DE5\u4F5C\u76EE\u5F55\uFF0C\u5982\u8BE5\u76EE\u5F55\u4E0D\u5B58\u5728\uFF0CWORKDIR \u4F1A\u5E2E\u4F60\u5EFA\u7ACB\u76EE\u5F55\u3002</p><div class="language-"><pre><code>WORKDIR &lt;\u5DE5\u4F5C\u76EE\u5F55\u8DEF\u5F84&gt;
</code></pre></div><p><code>USER</code> : \u6307\u5B9A\u5F53\u524D\u7528\u6237.</p><div class="language-"><pre><code>USER &lt;\u7528\u6237\u540D&gt;[:&lt;\u7528\u6237\u7EC4&gt;]
</code></pre></div><p><code>HEALTHCHECK</code> : HEALTHCHECK \u6307\u4EE4\u662F\u544A\u8BC9 Docker \u5E94\u8BE5\u5982\u4F55\u8FDB\u884C\u5224\u65AD\u5BB9\u5668\u7684\u72B6\u6001\u662F\u5426\u6B63\u5E38\u3002</p><div class="language-"><pre><code>HEALTHCHECK [\u9009\u9879] CMD &lt;\u547D\u4EE4&gt;\uFF1A\u8BBE\u7F6E\u68C0\u67E5\u5BB9\u5668\u5065\u5EB7\u72B6\u51B5\u7684\u547D\u4EE4
HEALTHCHECK NONE\uFF1A\u5982\u679C\u57FA\u7840\u955C\u50CF\u6709\u5065\u5EB7\u68C0\u67E5\u6307\u4EE4\uFF0C\u4F7F\u7528\u8FD9\u884C\u53EF\u4EE5\u5C4F\u853D\u6389\u5176\u5065\u5EB7\u68C0\u67E5\u6307\u4EE4
</code></pre></div><p><code>MAINTAINER</code> : \u8BBE\u7F6E\u955C\u50CF\u7684\u4F5C\u8005\uFF0C\u53EF\u4EE5\u662F\u4EFB\u610F\u5B57\u7B26\u4E32\u3002</p>`,30),a=[d];function r(p,i,n,u,s,g){return t(),o("div",null,a)}var k=e(l,[["render",r]]);export{E as __pageData,k as default};
